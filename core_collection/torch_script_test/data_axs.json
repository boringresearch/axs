{
    "_parent_entries": [ [ "^", "byname", "python_script" ] ],

    "imagenet_directory": [ "^", "execute", [[
        [ "byquery", "extracted,imagenet500" ],
        [ "get_path" ]
    ]] ],
    "num_of_images": 20,
    "model_name": "resnet50",
    "output_file_name": "script_output.json",

    "output_file_path": [ "^^", "execute", [[
        [ "get_kernel" ],
        [ "work_collection" ],
        [ "attached_entry", [], { "generated_name_prefix": "torch_script_output_" } ] ,
        [ "plant", [ "^^", "substitute", [[
            "tags", [ "script_output" ],
            "num_of_images", "#{num_of_images}#",
            "model_name", "#{model_name}#",
            "output_file_name", "#{output_file_name}#",
            "script_output", [ "AS^IS", "AS^IS", "^^", "load_json", [[ "^^", "get_path_from", "output_file_name" ]] ],
            "accuracy", [ "AS^IS", "AS^IS", "^^", "execute", [[
                [ "get_kernel" ],
                [ "byname", "imagenet_aux_recipe" ],
                [ "measure_accuracy", [[ "^^", "dig", "script_output.predictions" ]] ]
            ]] ]
        ]] ] ],
        [ "save" ],
        [ "get_path_from", "output_file_name" ]
    ]] ],

    "script_extra_params": [ "^^", "substitute", "\"#{imagenet_directory}#\" #{num_of_images}# #{model_name}# \"#{output_file_path}#\"" ],

    "rel_script_path": "barebones_resnet50.py",

    "torchvision_query": [ "python_package", "package_name=torchvision" ],

    "python_deps": [
        [ "^", "byquery", [[ "^^", "get", "torchvision_query" ]] ]
    ]
}

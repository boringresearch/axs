{
    "_producer_rules": [
        [ [ "downloaded" ], [["get_kernel"],["byname","downloader"],["download"]], {} ]
    ],

    "action_name": "download",
    "uncompress_format": "",
    "extra_tags": ["downloaded"],
    "dl_file_name": [ "^^", "func", ["os.path.basename", [ "^^", "get", "url" ]] ],

    "split_file_path": [ "^^", "get_split_file_name" ],
    "uncompressed_last_syll": [ "^^", "case", [ [ "^^", "get", "uncompress_format" ],
                                                "", [ "^^", "dig", "split_file_path.-1" ] ],
                                                { "default_value": ["^^", "execute", [[
                                                    [ "dig", "split_file_path.-1" ],
                                                    [ "rsplit", [".", 1] ],
                                                    [ "__getitem__", 0 ]
                                                ]] ] } ],

    "uncompressed_split_file_path": [ "^^", "execute", [[
                        [ "get", "split_file_path" ],
                        [ "__getitem__", [ "^^", "func", ["slice", 0, -1] ] ],
                        [ "__add__", [[[ "^^", "get", "uncompressed_last_syll" ]]] ]
                    ]] ],

    "entry_name": [ "^^", "execute", [[
        [ "noop", "_" ],
        [ "join", [[ "^^", "execute", [[
                        [ "get", "extra_tags" ],
                        [ "__add__", [[[ "^^", "get", "uncompressed_last_syll" ]]] ]
                    ]] ]]
        ]
    ]] ],

    "downloading_tool_query": "shell_tool,can_download_url",
    "downloading_tool_entry": [ "^", "byquery", [[ "^^", "get", "downloading_tool_query" ]], {}, ["downloading_tool_query"] ],

    "md5_tool_entry": [ "^", "byquery", "shell_tool,can_compute_md5" ],
    "uncompress_tool_entry": [ "^", "byquery", [[ "^^", "substitute", "shell_tool,can_uncompress_#{uncompress_format}#" ]], {}, ["uncompress_format"] ]
}

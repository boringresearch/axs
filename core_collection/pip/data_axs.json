{
    "_producer_rules": [
        [ [ "python_package", "package_name==torchvision", "with_cuda" ], [["install"]], { "package_version": "0.12.0+cu113", "pip_options": "torch==1.11.0+cu113 -f https://download.pytorch.org/whl/cu113/torch_stable.html"}, ["desired_python_version"] ],
        [ [ "python_package", "package_name==torch", "with_cuda" ], [["install"]], { "package_version": "1.11.0+cu113", "pip_options": "-f https://download.pytorch.org/whl/cu113/torch_stable.html"}, ["desired_python_version"] ],
        [ [ "python_package", "package_name==onnxruntime-gpu", "for_python36" ], [["install"]], { "package_version": "1.10.0", "pip_options": "protobuf==3.19.4" }, ["desired_python_version"] ],
        [ [ "python_package", "package_name==onnxruntime", "for_python36" ], [["install"]], { "package_version": "1.10.0", "pip_options": "protobuf==3.19.4" }, ["desired_python_version"] ],
        [ [ "python_package", "no_deps" ], [["install"]], { "pip_options": [ "no-deps" ] }, ["desired_python_version"] ],
        [ [ "python_package", "special", "broken_rule" ], [["install"]], {}, ["desired_python_version"] ],
        [ [ "python_package" ], [["install"]], {}, ["desired_python_version"] ]
    ],

    "version_suffix_cmd": [ "^^", "case", [ [ "^^", "get", ["package_version", ""]] , "" , "" ], {"default_value":  [ "^^", "substitute", "==#{package_version}#"] } ],
    "installable": [ "^^", "substitute", "#{package_name}##{version_suffix_cmd}#"],

    "desired_python_version": ["^", "kernel_python_major_dot_minor"],
    "python_tool_entry": [ "^", "byquery", [[ "shell_tool", "can_python", ["desired_python_version", ["^^", "get", "desired_python_version"]] ]], {}, ["desired_python_version"] ],
    "python_major_dot_minor": [ "^^", "dig", "python_tool_entry.major_dot_minor" ],

    "rel_install_dir": "install",

    "rel_packages_dir": [ "^^", "case", [ [ "^", "func", "platform.system"] ,
        "Windows" , [["^^", "get", "rel_install_dir"], "lib", "site-packages" ] ],
        { "default_value":  [["^^", "get", "rel_install_dir"], "lib", ["^^", "substitute", "python#{python_major_dot_minor}#"], "site-packages" ] }
    ],

    "version_suffix_name": [ "^^", "case", [ [ "^^", "get", ["package_version", ""]] , "" , "" ], {"default_value":  [ "^^", "substitute", "_#{package_version}#"] } ],
    "pip_entry_name": [ "^^", "substitute", "#{package_name}##{version_suffix_name}#_package_for_python#{python_major_dot_minor}#"]
}

{
    "_parent_entries": [ [ "^", "byname", "python_script" ] ],

    "_producer_rules": [
        [ [ "package_wheel", "package_name=mlperf_loadgen" ], [ "^^", "get", "__entry__" ], "get", { "param_name": "populated_wheel_entry" }, [] ]
    ],

    "wheel_entry": [ "^^", "execute", [[
        [ "get_kernel" ],
        [ "fresh_entry", [], { "own_data": { "tags": ["package_wheel"], "package_name": "mlperf_loadgen" }} ],
        [ "attach", [ "^", "work_collection" ] ],
        [ "save", "loadgen_package_wheel" ]
    ]] ],
    "wheel_entry_path": [ "^^", "execute", [[
        [ "get", "wheel_entry" ],
        [ "get_path" ]
    ]] ],

    "env": {
        "CC": [ "^", "execute", [[
            [ "byquery", "shell_tool,can_compile_c" ],
            [ "get", "tool_path" ]
        ]] ],
        "CFLAGS": "-std=c++14"
    },
    "in_dir": [ "^", "execute", [[
        [ "byquery", "git_repo,repo_name=mlperf_inference_git" ],
        [ "get_path", "loadgen" ]
    ]] ],
    "abs_script_path": "setup.py",
    "script_extra_params": [ "^^", "substitute", "bdist_wheel -d #{wheel_entry_path}#" ],

    "populated_wheel_entry": [ "^^", "execute", [[
        [ "run" ],
        [],
        [ "get", "wheel_entry" ]
    ]] ]
}
